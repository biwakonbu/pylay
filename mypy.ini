[mypy]
# Python 3.10+ 対応
python_version = 3.13

# 厳格モード有効化（PRD 要件）
strict = true

# 警告をエラーとして扱う
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true

# 型チェックの厳格化
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = true

# 変数アノテーション必須
disallow_any_generics = true
disallow_any_unimported = true
disallow_any_expr = true
disallow_any_decorated = true
disallow_any_explicit = true

# インポート関連
ignore_missing_imports = true
follow_imports = silent

# Pydantic 互換性（v2）
plugins = pydantic.mypy

# 出力設定
show_error_codes = true
show_column_numbers = true
error_summary = true

# 除外設定
exclude = (?x)(
    # テストファイルは一部緩和
    ^tests/.*\.py$ |
    # マイグレーションファイル
    .*/migrations/versions/.*
    )
# ネームスペースパッケージ設定（無効化）
# namespace_packages = true
# モジュール検索パス
mypy_path = .

# 特定のエラーコードを無視（必要に応じて）
# disable_error_code = import-untyped

# カスタム設定
# 型推論の強化（ast ハイブリッド対応）

# プロジェクト固有の設定
# pylay プロジェクトでは型アノテーション完全を要求
