[mypy]
# Python 3.10+ 対応
python_version = 3.13

# 厳格モード有効化（PRD 要件）
strict = true

# 警告をエラーとして扱う
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true

# 型チェックの厳格化
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = true

# 変数アノテーション必須（大幅緩和）
disallow_any_generics = false
disallow_any_unimported = false
disallow_any_expr = false
disallow_any_decorated = false
disallow_any_explicit = false

# インポート関連
ignore_missing_imports = true
follow_imports = silent

# Pydantic 互換性（v2）
plugins = pydantic.mypy

# 出力設定
show_error_codes = true
show_column_numbers = true
error_summary = true

# 除外設定
exclude = (?x)(
    # テストファイルは一部緩和
    ^tests/.*\.py$ |
    # マイグレーションファイル
    .*/migrations/versions/.*
    )
# ネームスペースパッケージ設定（無効化）
# namespace_packages = true
# モジュール検索パス
mypy_path = .
# 明示的なモジュール解決
explicit_package_bases = true

# 特定のエラーコードを無視（必要に応じて）
# disable_error_code = import-untyped

# 対象ファイル（問題分析スクリプトと同様）
files = converters/type_to_yaml.py,converters/yaml_to_type.py,doc_generators/yaml_doc_generator.py,doc_generators/base.py,doc_generators/config.py,schemas/yaml_type_spec.py,schemas/type_index.py

# カスタム設定
# 型推論の強化（ast ハイブリッド対応）

# プロジェクト固有の設定
# pylay プロジェクトでは型アノテーション完全を要求
