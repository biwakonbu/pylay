# create-pr

現在のブランチでの作業をまとめてGitHubのPRを作成します。

## 概要

GitHubのPRを作成し、以下の情報を構造的に整理して記載します：

### PRドキュメントの構成要素
- **背景と動機**: この変更を行うに至った経緯と設計思想
- **ゴール設定**: 達成すべき目標の明確な定義
- **MUST要件**: マージに必須の完了要件
- **BETTER要件**: あれば良いが必須ではない改善項目
- **実装詳細**: 具体的な変更内容とその影響
- **テストと検証**: 品質保証のためのテスト結果
- **影響範囲**: この変更が及ぼす影響の分析

## 実行内容

### 基本的なPR作成コマンド
```bash
gh pr create --title "作業内容のタイトル" --body "変更内容の詳細説明" --base "main" --head "$(git branch --show-current)"
```

### 構造化されたPR本文のテンプレート
```markdown
## 🎯 背景と動機

[この変更を行うに至った経緯と設計思想を記載]

## 📋 ゴール設定

### 達成目標
- [明確な目標1]
- [明確な目標2]

## ✅ MUST要件（マージ必須）
- [ ] [完了必須の要件1]
- [ ] [完了必須の要件2]

## ⭐ BETTER要件（あれば良い）
- [ ] [改善項目1]
- [ ] [改善項目2]

## 🔧 実装詳細

### 変更内容
- [具体的な実装内容1]
- [具体的な実装内容2]

### 技術的決定事項
- [なぜこのアプローチを選んだか]
- [他の選択肢との比較]

## 🧪 テストと検証

### 実施したテスト
- [テスト内容1]
- [テスト内容2]

### 検証結果
- [テスト結果1]
- [テスト結果2]

## 📁 変更ファイル

### 主要な変更
- \`ファイル名\`: [変更の概要]

### 依存関係への影響
- [依存関係への影響の有無と内容]

## 🚀 デプロイメント

### 必要な作業
- [デプロイ時の注意事項]
- [環境固有の設定]

## 🔄 ロールバック計画

### 問題発生時の対応
- [ロールバック手順]
- [影響範囲の特定方法]
```

## 使用例

### 標準的なPR（Issue #3: PyPI公開準備）
```bash
gh pr create \
  --title "Issue #3: PyPI公開準備とパッケージング完了" \
  --body "Issue #3の完了に伴い、以下の作業を実施しました：

## 🎯 背景と動機

pylayプロジェクトのPyPI公開に向け、パッケージングの標準化とCLIツールの動作安定性を確保する必要がありました。開発環境での依存関係管理から本番環境でのパッケージ配布への移行をスムーズに行うため、以下の観点から実装を行いました。

## 📋 ゴール設定

### 達成目標
- PyPIパッケージとしての標準的なインストール・動作が可能になること
- 開発者体験の向上とツールの信頼性確保

## ✅ MUST要件（マージ必須）
- [x] pyproject.tomlのPythonバージョン要件を3.12以上に設定
- [x] CLIツール（pylay --version）の動作確認
- [x] extract_types_from_module関数の実装と動作確認
- [x] インポートエラーの修正（テスト12/13通過）
- [x] README.mdにPyPIバッジとインストール手順の追加

## ⭐ BETTER要件（あれば良い）
- [x] 依存関係の脆弱性チェック実施
- [ ] ドキュメント生成機能の完全な動作確認（一部制限あり）

## 🔧 実装詳細

### 変更内容
- **pyproject.toml**: Python 3.12+対応と依存関係の調整
- **src/cli/main.py**: extract_types_from_module関数の統合
- **src/core/converters/type_to_yaml.py**: 型抽出機能の実装
- **README.md**: PyPI公開対応のドキュメント整備

### 技術的決定事項
Python 3.13+から3.12+に変更した理由：
- システムPython 3.12環境での動作保証のため
- より広範な環境での利用可能性を確保するため

## 🧪 テストと検証

### 実施したテスト
- パッケージビルドテスト（uv build）
- CLIツール動作テスト（pylay --version）
- ユニットテスト実行（pytest 12/13通過）
- 依存関係脆弱性チェック（safety）

### 検証結果
- ✅ パッケージが正常にビルドされることの確認
- ✅ CLIツールが適切なバージョン情報を表示することの確認
- ✅ 主要なテストケースが通過することの確認
- ⚠️ 一部のドキュメント生成機能に制限あり（今後の改善対象）

## 📁 変更ファイル

### 主要な変更
- \`pyproject.toml\`: パッケージング設定の更新
- \`README.md\`: PyPI公開対応ドキュメントの追加
- \`src/cli/main.py\`: CLI機能の拡張
- \`src/core/converters/type_to_yaml.py\`: 型抽出機能の実装

## 🚀 デプロイメント

### 必要な作業
- PyPIへのパッケージ公開
- ドキュメントサイトの更新（該当する場合）

## 🔄 ロールバック計画

### 問題発生時の対応
- Pythonバージョン要件を3.13以上に巻き戻す
- CLIツールのextract_types_from_module機能を無効化するオプションを追加" \
  --base "main" \
  --head "feature/issue-3-pypi" \
  --label "enhancement"
```

## 設計原則

### PRドキュメントの書き方
1. **背景の明確化**: 「なぜこの変更が必要か」を説明
2. **目標の設定**: 「何を達成したいか」を具体的に定義
3. **要件の分類**: MUST/BETTERで優先度を明確に
4. **実装の根拠**: 「なぜこの方法を選んだか」を説明
5. **影響の分析**: 「何に影響を与えるか」を明記
6. **テストの徹底**: 「どのように品質を保証するか」を記載

### 良いPRドキュメントの特徴
- 🔍 **読み手が理解しやすい**: 技術的な詳細だけでなく、意図を明確に
- 📊 **構造化されている**: 見出しと箇点で整理
- 🎯 **目標指向**: 単なる作業報告ではなく、達成目標を明確に
- ⚖️ **バランスが良い**: 技術的正確さと読みやすさの両立
- 🔄 **保守性が高い**: 変更の影響とロールバック方法を明記

## 前提条件

- GitHub CLI (`gh`) がインストールされ、認証されていること
- 作業ブランチが作成済みであること
- 作業内容が適切にコミットされていること
- PRドキュメントの構造を理解していること

## 注意事項

- **PR本文の品質**: 単なる作業報告ではなく、設計意図と影響分析を含むこと
- **MUST/BETTERの明確化**: マージ判断のための基準を明記
- **影響範囲の特定**: 変更が及ぼす影響を正確に分析
- **テスト結果の記載**: 品質保証のための具体的な結果を記載
