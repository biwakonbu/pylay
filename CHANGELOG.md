# CHANGELOG

## [0.3.0] - 2025年10月

### 新機能
- **Analyzerアーキテクチャの導入**: `src/core/analyzer/` を新規作成し、解析エンジンを独立化
- **高度な型推論と依存抽出**: mypy + AST + NetworkXを活用した包括的な解析機能
- **循環依存検出**: 依存グラフから自動的に循環を検出・報告
- **視覚化機能**: 依存関係をPNG/PDF/DOT形式で自動生成
- **柔軟な解析モード**: `types_only`, `deps_only`, `full` の3モードを選択可能
- **GraphProcessor**: グラフメトリクス計算とYAML/GraphMLエクスポート機能を追加

### 改善
- **疎結合アーキテクチャ**: 解析部分を他のコンポーネントから独立させ、拡張性を向上
- **型安全性強化**: Pydanticで型安全性を維持しつつ、柔軟な依存処理を実現
- **CLI/TUI強化**: `infer-deps` コマンドと `--mode` オプションを追加
- **ドキュメント自動生成**: 解析結果にグラフ情報（循環、統計）を自動追加
- **テストスイート拡張**: `test_analyzer.py` を追加し、19テストで完全網羅

### 修正
- **CIエラー修正**: テストのimportエラーとNetworkX依存を適切に処理
- **構文エラー修正**: `src/infer_deps.py` のtry-except構造を修正
- **カバレッジ向上**: 78% → 80%目標に近づくテスト追加

### 技術的改善
- **NetworkX統合**: グラフ分析機能を標準化（未インストール時も基本動作OK）
- **依存関係管理**: analyzerモジュールの循環import回避
- **エラーハンドリング**: NetworkX/Pydot未インストール時の適切なフォールバック

---

## [0.2.0] - 2025年1月

### 新機能
- **pyproject.toml設定駆動のディレクトリ丸ごと解析機能**: Issue #5 に対応し、設定ファイルに基づく包括的な型解析・ドキュメント生成機能を追加
- **--cleanオプション**: プロジェクト解析時に出力ディレクトリをクリーンアップする機能を追加
- **OutputPathManager**: 出力ファイル管理を統一し、より堅牢なパス管理を実現

### 改善
- **開発者ガイドの簡素化**: プロジェクトの概念とアーキテクチャを明確に整理
- **docs/ディレクトリの整理**: 散らばった古いYAMLファイルを削除し、出力ディレクトリを`docs/pylay-types/`に統一
- **CIテストエラー修正**: 継続的インテグレーションの安定性を向上

### 修正
- **型解析とテストの修正**: 型推論の精度向上とテストケースの拡充

### 技術的改善
- **バージョン0.2.0**: 安定版リリースに向けたバージョンアップデート
- **依存関係管理**: pyproject.tomlでの設定統一
- **コードベースのクリーンアップ**: 不要ファイルの整理と構造最適化

---

*このCHANGELOGは、[Keep a Changelog](https://keepachangelog.com/ja/1.0.0/)の形式に従っています。*
